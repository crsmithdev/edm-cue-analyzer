# EDM Cue Analyzer Default Configuration

# Hot Cue Definitions (A-H on CDJ)
hot_cues:
  A:
    name: "Early Intro"
    description: "Early intro blend point"
    position_percent: 0.08  # 8% into track
    loop_bars: 8
    color: "BLUE"  # Minimal/safest
    
  B:
    name: "Late Intro"
    description: "Late intro blend point before energy rises"
    position_percent: 0.20  # 20% into track
    loop_bars: 16
    color: "GREEN"  # Stable loop
    
  C:
    name: "Pre-Drop"
    description: "Setup point before drop for drop swaps"
    position_method: "before_first_drop"
    offset_bars: -2  # 2 bars before drop
    loop_bars: 4
    color: "ORANGE"  # Timing tool
    
  D:
    name: "Post-Drop"
    description: "High-energy exit point after drop"
    position_method: "after_first_drop"
    offset_bars: 4  # 4 bars after drop
    loop_bars: 8
    color: "GREEN"  # Stable loop
    
  E:
    name: "Breakdown"
    description: "Breakdown entry/exit point"
    position_method: "first_breakdown"
    offset_bars: 0
    loop_bars: 16
    color: "TEAL"  # Structured phrase
    
  F:
    name: "Second Energy"
    description: "Second drop or energy point"
    position_method: "second_drop"
    offset_bars: 0
    loop_bars: 8
    color: "YELLOW"  # Melodic highlight
    
  G:
    name: "Outro Start"
    description: "Outro exit point"
    position_percent: 0.85  # 85% into track
    loop_bars: 8
    color: "GREEN"  # Stable loop
    
  H:
    name: "Safe Hold"
    description: "Emergency safe hold point"
    position_percent: 0.50  # Middle of track
    loop_bars: 16
    color: "BLUE"  # Minimal/safest

# Memory Cue Definitions
memory_cues:
  - name: "Track Start"
    position_percent: 0.0
    
  - name: "First Drop"
    position_method: "first_drop"
    offset_bars: 0
    
  - name: "First Breakdown"
    position_method: "first_breakdown"
    offset_bars: 0
    
  - name: "Second Drop"
    position_method: "second_drop"
    offset_bars: 0
    
  - name: "Outro"
    position_percent: 0.85

# Analysis Parameters
analysis:
# Analysis parameters
analysis:
  # Energy detection
  energy_window_seconds: 0.25  # Finer resolution for more accurate timing (was 1.0)
  energy_threshold_increase: 0.15  # 15% increase indicates build/riser
  
  # Spectral analysis
  low_freq_max: 250  # Hz
  mid_freq_max: 4000  # Hz
  
  # Structure detection
  min_section_duration: 8.0  # seconds
  
  # Drop detection
  drop_energy_multiplier: 1.3  # Drop should be 30% higher energy than recent average
  drop_onset_strength_std: 1.2  # Standard deviations above mean for onset detection (was 1.5, more sensitive)
  drop_energy_std: 0.5  # Standard deviations above mean for energy (was 0.7, more sensitive)
  drop_max_energy_threshold: 0.55  # Must be in top 45% of track energy (was 0.60, more sensitive)
  drop_min_spacing_bars: 28  # Minimum bars between detected drops (avoid duplicates)
  drop_lookback_seconds: 5.0  # How far back to look for energy average (was 10 frames)
  
  # Breakdown detection
  breakdown_energy_threshold: 0.6  # Breakdown should be 60% or less of max energy
  breakdown_min_duration_bars: 4  # Must last at least 4 bars
  breakdown_min_spacing_bars: 16  # Minimum bars between breakdowns
  breakdown_perc_threshold: 0.6  # Percussive energy threshold (HPSS)
  breakdown_ratio_threshold: 1.1  # Harmonic/percussive ratio threshold (HPSS)
  
  # Build detection
  build_window_size: 20  # Number of energy samples to check for sustained increase (was 5, now adjusted for 0.25s windows)

# Rekordbox XML Export
rekordbox:
  # Color mapping (Rekordbox uses specific color codes)
  colors:
    BLUE: "#0000FF"     # Minimal/safest
    GREEN: "#00FF00"    # Stable loop
    TEAL: "#00CED1"     # Structured phrase  
    YELLOW: "#FFFF00"   # Melodic highlight
    ORANGE: "#FF8800"   # Timing tool/build
    PURPLE: "#9932CC"   # Adjusted loop
    RED: "#FF0000"      # Instant jump/unstable

# Terminal Display
display:
  show_waveform: true
  waveform_width: 80
  color_enabled: true
